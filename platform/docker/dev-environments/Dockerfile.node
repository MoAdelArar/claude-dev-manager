FROM node:20-slim

RUN apt-get update && apt-get install -y --no-install-recommends \
    git curl build-essential \
    python3 python3-pip \
    jq tree vim \
    && rm -rf /var/lib/apt/lists/*

RUN npm install -g \
    yarn pnpm \
    typescript ts-node \
    eslint prettier \
    jest vitest \
    @angular/cli \
    create-react-app \
    next

# Claude Code + CDM
RUN npm install -g @anthropic-ai/claude-code
RUN git clone --depth 1 https://github.com/MoAdelArar/claude-dev-manager.git /opt/cdm && \
    cd /opt/cdm && npm install && npm run build && npm link 2>/dev/null || true

WORKDIR /workspace
CMD ["sleep", "infinity"]
